package me.amfero.blmclient.module.exploit;

import me.amfero.blmclient.module.Category;
import me.amfero.blmclient.module.Module;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.EnumHand;
import net.minecraftforge.event.entity.player.PlayerInteractEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class PacketMine extends Module 
{
	public PacketMine()
	{
		super("PacketMine", "", Category.EXPLOIT);
	}
	
	@SuppressWarnings("deprecation")
	@SubscribeEvent
	public void onBlockClick(PlayerInteractEvent.LeftClickBlock event)
	{
		if (event.getPos() != null && mc.world.getBlockState(event.getPos()).getBlock().getBlockHardness(mc.world.getBlockState(event.getPos()), mc.world, event.getPos()) != -1)
		{
			mc.player.swingArm(EnumHand.MAIN_HAND);
			mc.player.connection.sendPacket(new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, event.getPos(), EnumFacing.getDirectionFromEntityLiving(event.getPos(), mc.player)));
			mc.player.connection.sendPacket(new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, event.getPos(), EnumFacing.getDirectionFromEntityLiving(event.getPos(), mc.player)));
		}
	}
}
