package me.amfero.blmclient.module.exploit;

import me.amfero.blmclient.event.events.PacketSendEvent;
import me.amfero.blmclient.mixin.accessor.ICPacketPlayer;
import me.amfero.blmclient.module.Category;
import me.amfero.blmclient.module.Module;
import me.amfero.blmclient.setting.Setting;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class AntiHunger extends Module
{
	Setting sprint = new Setting("Sprint", this, true);
	
	public AntiHunger()
	{
		super("AntiHunger", "", Category.EXPLOIT);
		addSetting(sprint);
	}

	@SubscribeEvent
	public void onPacket(PacketSendEvent event) 
	{
		if(nullCheck()) return;
		if (event.getPacket() instanceof CPacketPlayer) 
		{
			CPacketPlayer packet = (CPacketPlayer) event.getPacket();
			ICPacketPlayer shit = (ICPacketPlayer) packet;
			shit.setOnGround(mc.player.fallDistance >= 0.0f || mc.playerController.getIsHittingBlock());
		}
		if (sprint.getBooleanValue() && event.getPacket() instanceof CPacketEntityAction) 
		{
			final CPacketEntityAction packet2 = (CPacketEntityAction) event.getPacket();
			if (packet2.getAction() == CPacketEntityAction.Action.START_SPRINTING || packet2.getAction() == CPacketEntityAction.Action.STOP_SPRINTING)
			{
				event.setCanceled(true);
			}
		}
	}
}
